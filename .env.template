# ============================================
# IMPORTANT: API Keys and Secrets
# ============================================
# Store all sensitive API keys and secrets in:
# - Supabase Vault (recommended)
# - AWS Secrets Manager
# - Azure Key Vault
# - HashiCorp Vault
# - Environment variables in your deployment platform
#
# DO NOT commit actual keys to version control!
# This file is a template only.
# ============================================

# Server Configuration
NODE_ENV=development
PORT=3000
HOST=localhost

# API Keys and External Services
# Store these in Supabase Vault or secure secret manager
OPENAI_API_KEY=<stored-in-supabase-vault>
OPENAI_MODEL=gpt-4-vision-preview
OPENAI_ORGANIZATION=<stored-in-supabase-vault>

# Supabase Configuration
# These should be retrieved from Supabase dashboard
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=<stored-in-environment-variable>
SUPABASE_SERVICE_KEY=<stored-in-supabase-vault>
SUPABASE_JWT_SECRET=<stored-in-supabase-vault>

# Database Configuration (if using direct connection)
# Store credentials in secret manager
DATABASE_URL=<stored-in-supabase-vault>
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=<stored-in-secret-manager>
REDIS_DB=0
REDIS_URL=<stored-in-secret-manager>

# Bull Queue Configuration
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRIES=3
QUEUE_RETRY_DELAY=5000
QUEUE_DEFAULT_JOB_OPTIONS_REMOVE_ON_COMPLETE=100
QUEUE_DEFAULT_JOB_OPTIONS_REMOVE_ON_FAIL=50

# File Upload Configuration
UPLOAD_DIR=./uploads
TEMP_DIR=./temp
OUTPUT_DIR=./output
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/tiff,image/bmp,application/pdf

# Image Processing Configuration
IMAGE_MAX_WIDTH=4096
IMAGE_MAX_HEIGHT=4096
IMAGE_QUALITY=90
THUMBNAIL_WIDTH=300
THUMBNAIL_HEIGHT=300

# Tesseract OCR Configuration
TESSERACT_LANG=eng
TESSERACT_PSM=3
TESSERACT_OEM=3
TESSERACT_DPI=300
TESSERACT_WORKER_THREADS=4

# OpenCV Configuration
OPENCV_BUILD_DIR=/usr/local/lib
OPENCV4NODEJS_DISABLE_AUTOBUILD=1
OPENCV_INCLUDE_DIR=/usr/local/include/opencv4
OPENCV_LIB_DIR=/usr/local/lib

# Security Configuration
# CRITICAL: Store these in secure secret manager
JWT_SECRET=<stored-in-supabase-vault>
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_SECRET=<stored-in-supabase-vault>
REFRESH_TOKEN_EXPIRES_IN=30d
BCRYPT_ROUNDS=10

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_DIR=./logs
LOG_FILE_MAX_SIZE=10485760
LOG_FILE_MAX_FILES=5

# Storage Configuration (S3/Cloud Storage)
# Store credentials in secret manager
STORAGE_TYPE=local
S3_BUCKET=your-s3-bucket-name
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=<stored-in-secret-manager>
S3_SECRET_ACCESS_KEY=<stored-in-secret-manager>
S3_ENDPOINT=

# Three.js Rendering Configuration
THREE_RENDERER_WIDTH=1920
THREE_RENDERER_HEIGHT=1080
THREE_RENDERER_ANTIALIAS=true

# API Configuration
API_PREFIX=/api/v1
API_TIMEOUT=30000
API_KEY=<stored-in-supabase-vault>

# Email Configuration (for notifications)
# Store credentials in secret manager
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=<stored-in-secret-manager>
SMTP_PASS=<stored-in-secret-manager>
EMAIL_FROM=noreply@floorplan-api.com

# Monitoring and Analytics
# Store API keys in secret manager
SENTRY_DSN=<stored-in-secret-manager>
NEW_RELIC_LICENSE_KEY=<stored-in-secret-manager>
GOOGLE_ANALYTICS_ID=<stored-in-secret-manager>

# Feature Flags
ENABLE_OCR=true
ENABLE_AI_PROCESSING=true
ENABLE_3D_GENERATION=true
ENABLE_CACHING=true
ENABLE_QUEUE_DASHBOARD=true
ENABLE_METRICS=true

# Cache Configuration
CACHE_TTL=3600
CACHE_CHECK_PERIOD=600

# Webhook Configuration
# Store secret in secret manager
WEBHOOK_URL=<stored-in-secret-manager>
WEBHOOK_SECRET=<stored-in-supabase-vault>

# Development Tools
DEBUG=false
VERBOSE_LOGGING=false
MOCK_EXTERNAL_APIS=false

# ============================================
# Secret Management Best Practices:
# ============================================
# 1. Use Supabase Vault for database-related secrets
# 2. Use platform environment variables for deployment
# 3. Rotate secrets regularly
# 4. Use different secrets for each environment
# 5. Never log or expose secrets in error messages
# 6. Use secret scanning tools in CI/CD pipeline
# ============================================